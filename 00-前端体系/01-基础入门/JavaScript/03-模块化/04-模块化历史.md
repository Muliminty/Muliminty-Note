# æ¨¡å—åŒ–å†å²ï¼ˆModule Historyï¼‰

JavaScript æ¨¡å—åŒ–çš„å‘å±•å†ç¨‹å’Œä¸åŒè§„èŒƒã€‚

---

## ğŸ“š æ¨¡å—åŒ–å‘å±•å†ç¨‹

### 1. æ— æ¨¡å—åŒ–æ—¶ä»£ï¼ˆ1995-2009ï¼‰

æ—©æœŸ JavaScript æ²¡æœ‰æ¨¡å—ç³»ç»Ÿï¼Œé€šè¿‡å…¨å±€å˜é‡å…±äº«ä»£ç ï¼š

```javascript
// math.js
var add = function(a, b) {
  return a + b;
};

// app.js
console.log(add(1, 2)); // ä¾èµ–å…¨å±€å˜é‡
```

**é—®é¢˜**ï¼š
- å…¨å±€å˜é‡æ±¡æŸ“
- å‘½åå†²çª
- ä¾èµ–å…³ç³»ä¸æ˜ç¡®
- éš¾ä»¥ç»´æŠ¤

---

### 2. CommonJSï¼ˆ2009ï¼‰

Node.js é‡‡ç”¨çš„æ¨¡å—ç³»ç»Ÿï¼Œä½¿ç”¨ `require` å’Œ `module.exports`ã€‚

#### è¯­æ³•

```javascript
// math.js
function add(a, b) {
  return a + b;
}
module.exports = { add };

// æˆ–è€…
exports.add = add;

// app.js
const { add } = require('./math.js');
console.log(add(1, 2));
```

#### ç‰¹ç‚¹

- âœ… åŒæ­¥åŠ è½½
- âœ… é€‚åˆæœåŠ¡ç«¯
- âŒ ä¸é€‚åˆæµè§ˆå™¨ï¼ˆåŒæ­¥é˜»å¡ï¼‰

---

### 3. AMDï¼ˆAsynchronous Module Definitionï¼Œ2009ï¼‰

RequireJS é‡‡ç”¨çš„å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒã€‚

#### è¯­æ³•

```javascript
// math.js
define(['dependencies'], function(deps) {
  function add(a, b) {
    return a + b;
  }
  return { add };
});

// app.js
require(['math'], function(math) {
  console.log(math.add(1, 2));
});
```

#### ç‰¹ç‚¹

- âœ… å¼‚æ­¥åŠ è½½
- âœ… é€‚åˆæµè§ˆå™¨
- âŒ è¯­æ³•å¤æ‚
- âŒ éœ€è¦åŠ è½½å™¨ï¼ˆRequireJSï¼‰

---

### 4. UMDï¼ˆUniversal Module Definitionï¼Œ2011ï¼‰

é€šç”¨æ¨¡å—å®šä¹‰ï¼Œå…¼å®¹ CommonJSã€AMD å’Œå…¨å±€å˜é‡ã€‚

#### è¯­æ³•

```javascript
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD
    define(['exports'], factory);
  } else if (typeof exports === 'object') {
    // CommonJS
    factory(exports);
  } else {
    // å…¨å±€å˜é‡
    factory(root);
  }
}(typeof self !== 'undefined' ? self : this, function (exports) {
  function add(a, b) {
    return a + b;
  }
  exports.add = add;
}));
```

#### ç‰¹ç‚¹

- âœ… å…¼å®¹å¤šç§ç¯å¢ƒ
- âŒ ä»£ç å†—é•¿
- âŒ ä¸»è¦ç”¨äºåº“å¼€å‘

---

### 5. ES6 æ¨¡å—ï¼ˆ2015ï¼‰

JavaScript å®˜æ–¹æ¨¡å—ç³»ç»Ÿï¼Œä½¿ç”¨ `import` å’Œ `export`ã€‚

#### è¯­æ³•

```javascript
// math.js
export function add(a, b) {
  return a + b;
}

// app.js
import { add } from './math.js';
console.log(add(1, 2));
```

#### ç‰¹ç‚¹

- âœ… å®˜æ–¹æ ‡å‡†
- âœ… é™æ€åˆ†æ
- âœ… Tree shaking
- âœ… ä¸¥æ ¼æ¨¡å¼
- âš ï¸ éœ€è¦ç°ä»£æµè§ˆå™¨æˆ–è½¬è¯‘

---

## ğŸ”„ è§„èŒƒå¯¹æ¯”

| è§„èŒƒ | åŠ è½½æ–¹å¼ | é€‚ç”¨ç¯å¢ƒ | è¯­æ³•å¤æ‚åº¦ |
|------|---------|---------|-----------|
| CommonJS | åŒæ­¥ | Node.js | ç®€å• |
| AMD | å¼‚æ­¥ | æµè§ˆå™¨ | ä¸­ç­‰ |
| UMD | åŒæ­¥/å¼‚æ­¥ | é€šç”¨ | å¤æ‚ |
| ES6 æ¨¡å— | é™æ€/åŠ¨æ€ | é€šç”¨ | ç®€å• |

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### Node.js ç¯å¢ƒ

```javascript
// âœ… æ¨èï¼šä½¿ç”¨ ES6 æ¨¡å—ï¼ˆNode.js 14+ï¼‰
// package.json
{
  "type": "module"
}

// math.js
export function add(a, b) {
  return a + b;
}

// app.js
import { add } from './math.js';
```

### æµè§ˆå™¨ç¯å¢ƒ

```javascript
// âœ… æ¨èï¼šä½¿ç”¨ ES6 æ¨¡å— + æ„å»ºå·¥å…·
// ä½¿ç”¨ Viteã€Webpack ç­‰å·¥å…·è½¬è¯‘å’Œæ‰“åŒ…
import { add } from './math.js';
```

### åº“å¼€å‘

```javascript
// âœ… æ¨èï¼šåŒæ—¶æ”¯æŒ CommonJS å’Œ ES6 æ¨¡å—
// package.json
{
  "main": "dist/index.cjs.js",      // CommonJS
  "module": "dist/index.esm.js",     // ES6 æ¨¡å—
  "exports": {
    ".": {
      "import": "./dist/index.esm.js",
      "require": "./dist/index.cjs.js"
    }
  }
}
```

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [ES6 æ¨¡å—](./01-ES6æ¨¡å—.md) â€” ES6 æ¨¡å—è¯¦è§£
- [å¯¼å…¥å¯¼å‡º](./02-å¯¼å…¥å¯¼å‡º.md) â€” å¯¼å…¥å¯¼å‡ºæ–¹å¼
- [åŠ¨æ€å¯¼å…¥](./03-åŠ¨æ€å¯¼å…¥.md) â€” åŠ¨æ€å¯¼å…¥

---

**å‚è€ƒ**ï¼š
- [CommonJS è§„èŒƒ](https://nodejs.org/api/modules.html)
- [AMD è§„èŒƒ](https://github.com/amdjs/amdjs-api)
- [UMD è§„èŒƒ](https://github.com/umdjs/umd)

---

#javascript #æ¨¡å—åŒ– #commonjs #amd #umd #es-modules
