# å‡½æ•°å¼ç¼–ç¨‹æ¨¡å¼ï¼ˆFunctional Programming Patternsï¼‰

å‡½æ•°å¼ç¼–ç¨‹çš„å¸¸è§æ¨¡å¼å’Œå®è·µã€‚

---

## ğŸ“š æ ¸å¿ƒæ¨¡å¼

### 1. çº¯å‡½æ•°ï¼ˆPure Functionsï¼‰

è¾“å…¥ç›¸åŒï¼Œè¾“å‡ºå§‹ç»ˆç›¸åŒï¼Œæ— å‰¯ä½œç”¨ï¼š

```javascript
// âœ… çº¯å‡½æ•°
function add(a, b) {
  return a + b;
}

// âŒ éçº¯å‡½æ•°ï¼ˆæœ‰å‰¯ä½œç”¨ï¼‰
let counter = 0;
function increment() {
  counter++; // ä¿®æ”¹å¤–éƒ¨çŠ¶æ€
  return counter;
}

// âŒ éçº¯å‡½æ•°ï¼ˆä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼‰
function getCurrentTime() {
  return new Date(); // ä¾èµ–æ—¶é—´
}
```

---

### 2. å‡½æ•°ç»„åˆï¼ˆFunction Compositionï¼‰

å°†å¤šä¸ªå‡½æ•°ç»„åˆæˆæ–°å‡½æ•°ï¼š

```javascript
// ç»„åˆå‡½æ•°
const compose = (...fns) => x => fns.reduceRight((acc, fn) => fn(acc), x);
const pipe = (...fns) => x => fns.reduce((acc, fn) => fn(acc), x);

// ä½¿ç”¨
const add1 = x => x + 1;
const multiply2 = x => x * 2;
const add1ThenMultiply2 = pipe(add1, multiply2);
console.log(add1ThenMultiply2(3)); // 8
```

---

### 3. æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰

å°†å¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºå•å‚æ•°å‡½æ•°é“¾ï¼š

```javascript
function curry(fn) {
  return function curried(...args) {
    if (args.length >= fn.length) {
      return fn.apply(this, args);
    } else {
      return function(...nextArgs) {
        return curried.apply(this, args.concat(nextArgs));
      };
    }
  };
}

const add = (a, b, c) => a + b + c;
const curriedAdd = curry(add);
console.log(curriedAdd(1)(2)(3)); // 6
```

---

### 4. éƒ¨åˆ†åº”ç”¨ï¼ˆPartial Applicationï¼‰

å›ºå®šå‡½æ•°çš„éƒ¨åˆ†å‚æ•°ï¼š

```javascript
function partial(fn, ...fixedArgs) {
  return function(...remainingArgs) {
    return fn(...fixedArgs, ...remainingArgs);
  };
}

const multiply = (a, b) => a * b;
const double = partial(multiply, 2);
console.log(double(5)); // 10
```

---

### 5. é—­åŒ…ï¼ˆClosuresï¼‰

å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼š

```javascript
function createCounter() {
  let count = 0;
  return function() {
    return ++count;
  };
}

const counter = createCounter();
console.log(counter()); // 1
console.log(counter()); // 2
```

---

## ğŸ¯ æ•°æ®å¤„ç†æ¨¡å¼

### 1. Map-Reduce æ¨¡å¼

```javascript
const numbers = [1, 2, 3, 4, 5];

// Map: è½¬æ¢æ¯ä¸ªå…ƒç´ 
const doubled = numbers.map(n => n * 2);

// Reduce: èšåˆç»“æœ
const sum = numbers.reduce((acc, n) => acc + n, 0);
```

### 2. ç®¡é“æ¨¡å¼

```javascript
const pipe = (...fns) => x => fns.reduce((acc, fn) => fn(acc), x);

const process = pipe(
  x => x * 2,
  x => x + 1,
  x => x.toString()
);

console.log(process(5)); // "11"
```

### 3. é“¾å¼è°ƒç”¨

```javascript
const numbers = [1, 2, 3, 4, 5];

const result = numbers
  .filter(n => n % 2 === 0)
  .map(n => n * 2)
  .reduce((acc, n) => acc + n, 0);

console.log(result); // 12
```

---

## ğŸ’¡ å®é™…åº”ç”¨

### 1. æ•°æ®è½¬æ¢

```javascript
const users = [
  { name: 'Alice', age: 25, active: true },
  { name: 'Bob', age: 30, active: false }
];

// å‡½æ•°å¼å¤„ç†
const activeUserNames = users
  .filter(user => user.active)
  .map(user => user.name.toUpperCase())
  .sort();
```

### 2. äº‹ä»¶å¤„ç†

```javascript
const handleClick = pipe(
  getEventTarget,
  getDataAttribute,
  parseJSON,
  updateState
);

button.addEventListener('click', handleClick);
```

### 3. é…ç½®æ„å»º

```javascript
const createConfig = pipe(
  setDefaults,
  applyEnvironment,
  validateConfig
);

const config = createConfig(userConfig);
```

---

## ğŸ”§ é«˜çº§æ¨¡å¼

### 1. Monad æ¨¡å¼

```javascript
class Maybe {
  constructor(value) {
    this.value = value;
  }
  
  static of(value) {
    return new Maybe(value);
  }
  
  map(fn) {
    return this.value == null 
      ? Maybe.of(null)
      : Maybe.of(fn(this.value));
  }
  
  flatMap(fn) {
    return this.value == null
      ? Maybe.of(null)
      : fn(this.value);
  }
}

Maybe.of(5)
  .map(x => x * 2)
  .map(x => x + 1)
  .map(console.log); // 11
```

### 2. Functor æ¨¡å¼

```javascript
class Box {
  constructor(value) {
    this.value = value;
  }
  
  map(fn) {
    return new Box(fn(this.value));
  }
  
  fold(fn) {
    return fn(this.value);
  }
}

Box.of(5)
  .map(x => x * 2)
  .fold(console.log); // 10
```

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [é«˜é˜¶å‡½æ•°](./01-é«˜é˜¶å‡½æ•°.md) â€” é«˜é˜¶å‡½æ•°è¯¦è§£
- [ç®­å¤´å‡½æ•°](./02-ç®­å¤´å‡½æ•°.md) â€” ç®­å¤´å‡½æ•°è¯­æ³•
- [ä¸å¯å˜æ•°æ®](./03-ä¸å¯å˜æ•°æ®.md) â€” ä¸å¯å˜æ•°æ®æ¨¡å¼

---

**å‚è€ƒ**ï¼š
- [Functional Programming in JavaScript](https://www.freecodecamp.org/news/functional-programming-in-javascript/)
- [Mostly Adequate Guide to Functional Programming](https://github.com/MostlyAdequate/mostly-adequate-guide)

---

#javascript #å‡½æ•°å¼ç¼–ç¨‹ #functional-programming #patterns
