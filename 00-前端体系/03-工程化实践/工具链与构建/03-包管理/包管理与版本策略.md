# åŒ…ç®¡ç†ä¸ç‰ˆæœ¬ç­–ç•¥

> å‰ç«¯åŒ…ç®¡ç†å·¥å…·ï¼ˆnpmã€yarnã€pnpmï¼‰çš„ä½¿ç”¨å’Œç‰ˆæœ¬ç®¡ç†æœ€ä½³å®è·µã€‚

---

## ğŸ“‹ å­¦ä¹ ç›®æ ‡

- âœ… ç†è§£ npmã€yarnã€pnpm çš„ç‰¹ç‚¹å’ŒåŒºåˆ«
- âœ… æŒæ¡åŒ…ç®¡ç†çš„åŸºç¡€æ“ä½œ
- âœ… ç†è§£ç‰ˆæœ¬å·å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬
- âœ… æŒæ¡ä¾èµ–ç®¡ç†ç­–ç•¥
- âœ… èƒ½å¤Ÿè§£å†³ä¾èµ–å†²çªé—®é¢˜

---

## åŒ…ç®¡ç†å·¥å…·æ·±åº¦å¯¹æ¯”

### npmï¼šä¼ ç»Ÿä½†ç¨³å®š

#### æ¶æ„è®¾è®¡

**ä¾èµ–å®‰è£…æœºåˆ¶**ï¼š
```
node_modules/
â”œâ”€â”€ package-a/
â”‚   â”œâ”€â”€ node_modules/
â”‚   â”‚   â””â”€â”€ package-c/  # åµŒå¥—ä¾èµ–
â”‚   â””â”€â”€ package.json
â””â”€â”€ package-b/
    â”œâ”€â”€ node_modules/
    â”‚   â””â”€â”€ package-c/  # é‡å¤å®‰è£…
    â””â”€â”€ package.json
```

**é—®é¢˜åˆ†æ**ï¼š
1. **ä¾èµ–æå‡ï¼ˆHoistingï¼‰**ï¼šnpm 3+ å°è¯•å°†ä¾èµ–æå‡åˆ°é¡¶å±‚ï¼Œä½†ç®—æ³•ä¸å®Œç¾
2. **å¹½çµä¾èµ–ï¼ˆPhantom Dependenciesï¼‰**ï¼šå¯ä»¥è®¿é—®æœªå£°æ˜çš„ä¾èµ–
3. **ç£ç›˜å ç”¨**ï¼šç›¸åŒåŒ…å¯èƒ½è¢«å®‰è£…å¤šæ¬¡

**æ€§èƒ½ç“¶é¢ˆ**ï¼š
- æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼šå¤§é‡å°æ–‡ä»¶ I/O
- ä¾èµ–è§£æï¼šé€’å½’è§£æä¾èµ–æ ‘
- ç½‘ç»œè¯·æ±‚ï¼šä¸²è¡Œä¸‹è½½ï¼ˆnpm 6+ æ”¯æŒå¹¶è¡Œï¼‰

### yarnï¼šæ€§èƒ½ä¸åŠŸèƒ½çš„å¹³è¡¡

#### Yarn v1ï¼ˆç»å…¸ç‰ˆï¼‰

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- **ç¡®å®šæ€§å®‰è£…**ï¼šyarn.lock ç¡®ä¿ä¸€è‡´æ€§
- **å¹¶è¡Œä¸‹è½½**ï¼šå¤šçº¿ç¨‹ä¸‹è½½åŒ…
- **ç¦»çº¿æ¨¡å¼**ï¼šæ”¯æŒç¦»çº¿å®‰è£…

**æ€§èƒ½ä¼˜åŒ–**ï¼š
```bash
# å¹¶è¡Œä¸‹è½½ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
yarn install --network-timeout 100000

# ä½¿ç”¨ç¼“å­˜
yarn cache dir
yarn cache clean
```

#### Yarn v2/v3ï¼ˆBerry - Plug'n'Playï¼‰

**é©å‘½æ€§å˜åŒ–ï¼šPnP æ¨¡å¼**

**ä¼ ç»Ÿæ¨¡å¼é—®é¢˜**ï¼š
```
node_modules/  # 10,000+ æ–‡ä»¶
â”œâ”€â”€ .bin/
â”œâ”€â”€ package-a/
â””â”€â”€ ...
```

**PnP æ¨¡å¼**ï¼š
```
.pnp.cjs  # å•ä¸ªæ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰ä¾èµ–æ˜ å°„
```

**å·¥ä½œåŸç†**ï¼š
```javascript
// .pnp.cjs
module.exports = {
  packageRegistryData: new Map([
    ['package-a', {
      packageLocation: '.yarn/cache/package-a-npm-1.0.0.zip',
      packageDependencies: new Map([
        ['package-c', 'npm:1.0.0']
      ])
    }]
  ])
}
```

**ä¼˜åŠ¿**ï¼š
- **é›¶æ–‡ä»¶ç³»ç»ŸæŸ¥æ‰¾**ï¼šæ‰€æœ‰ä¾èµ–è§£æåœ¨å†…å­˜ä¸­å®Œæˆ
- **å®‰è£…é€Ÿåº¦**ï¼šæ¯”ä¼ ç»Ÿæ¨¡å¼å¿« 2-3 å€
- **ç£ç›˜å ç”¨**ï¼šå‡å°‘ 50%+

**åŠ£åŠ¿**ï¼š
- **å…¼å®¹æ€§é—®é¢˜**ï¼šéƒ¨åˆ†å·¥å…·ä¸æ”¯æŒ PnP
- **å­¦ä¹ æ›²çº¿**ï¼šéœ€è¦ç†è§£æ–°çš„å·¥ä½œæ–¹å¼

**å¯ç”¨ PnP**ï¼š
```bash
yarn set version berry
# æˆ–
yarn set version 3
```

### pnpmï¼šæ•ˆç‡ä¸ä¸¥æ ¼çš„å®Œç¾ç»“åˆ

#### æ ¸å¿ƒè®¾è®¡ï¼šå†…å®¹å¯»å€å­˜å‚¨

**ä¼ ç»Ÿæ–¹å¼**ï¼š
```
project-a/node_modules/package-x/  # 100MB
project-b/node_modules/package-x/  # 100MB (é‡å¤)
```

**pnpm æ–¹å¼**ï¼š
```
~/.pnpm-store/v3/files/
â””â”€â”€ 00/abc123...  # å†…å®¹å¯»å€ï¼Œåªå­˜å‚¨ä¸€æ¬¡

project-a/node_modules/package-x -> ~/.pnpm-store/... (ç¡¬é“¾æ¥)
project-b/node_modules/package-x -> ~/.pnpm-store/... (ç¡¬é“¾æ¥)
```

**æ€§èƒ½ä¼˜åŠ¿**ï¼š
- **ç£ç›˜å ç”¨**ï¼šèŠ‚çœ 70%+ ç©ºé—´
- **å®‰è£…é€Ÿåº¦**ï¼šç¡¬é“¾æ¥æ¯”å¤åˆ¶å¿« 10 å€
- **è·¨é¡¹ç›®å…±äº«**ï¼šæ‰€æœ‰é¡¹ç›®å…±äº«åŒä¸€å­˜å‚¨

#### ä¸¥æ ¼çš„ä¾èµ–ç®¡ç†

**npm/yarn çš„é—®é¢˜**ï¼š
```javascript
// package.json ä¸­æ²¡æœ‰å£°æ˜ lodash
import _ from 'lodash'  // âŒ ä½†å¯ä»¥å·¥ä½œï¼ˆå¹½çµä¾èµ–ï¼‰
```

**pnpm çš„è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// package.json ä¸­æ²¡æœ‰å£°æ˜ lodash
import _ from 'lodash'  // âŒ æŠ¥é”™ï¼šæ‰¾ä¸åˆ°æ¨¡å—
```

**ä¾èµ–éš”ç¦»**ï¼š
```
node_modules/
â”œâ”€â”€ .pnpm/
â”‚   â”œâ”€â”€ package-a@1.0.0/
â”‚   â”‚   â””â”€â”€ node_modules/
â”‚   â”‚       â”œâ”€â”€ package-a/  # ç¬¦å·é“¾æ¥
â”‚   â”‚       â””â”€â”€ package-c/  # åªèƒ½è®¿é—®å£°æ˜çš„ä¾èµ–
â”‚   â””â”€â”€ package-b@1.0.0/
â”‚       â””â”€â”€ node_modules/
â”‚           â”œâ”€â”€ package-b/
â”‚           â””â”€â”€ package-c/  # ç‹¬ç«‹å®ä¾‹
â””â”€â”€ package-a -> .pnpm/package-a@1.0.0/node_modules/package-a
```

#### æ€§èƒ½åŸºå‡†æµ‹è¯•

**å®‰è£…é€Ÿåº¦å¯¹æ¯”**ï¼ˆ1000 ä¸ªä¾èµ–ï¼‰ï¼š
```
npm:  45s
yarn: 25s
pnpm: 12s
```

**ç£ç›˜å ç”¨å¯¹æ¯”**ï¼ˆ10 ä¸ªé¡¹ç›®ï¼‰ï¼š
```
npm:  10GB
yarn: 8GB
pnpm: 2GB (å…±äº«å­˜å‚¨)
```

**å†…å­˜å ç”¨å¯¹æ¯”**ï¼š
```
npm:  200MB
yarn: 150MB
pnpm: 100MB
```

---

## åŸºç¡€æ“ä½œ

### npm

```bash
# å®‰è£…ä¾èµ–
npm install package-name
npm install package-name --save-dev

# æ›´æ–°ä¾èµ–
npm update package-name

# å¸è½½ä¾èµ–
npm uninstall package-name

# æŸ¥çœ‹ä¾èµ–
npm list
npm list --depth=0
```

### yarn

```bash
# å®‰è£…ä¾èµ–
yarn add package-name
yarn add package-name --dev

# æ›´æ–°ä¾èµ–
yarn upgrade package-name

# å¸è½½ä¾èµ–
yarn remove package-name

# æŸ¥çœ‹ä¾èµ–
yarn list
```

### pnpm

```bash
# å®‰è£…ä¾èµ–
pnpm add package-name
pnpm add package-name -D

# æ›´æ–°ä¾èµ–
pnpm update package-name

# å¸è½½ä¾èµ–
pnpm remove package-name

# æŸ¥çœ‹ä¾èµ–
pnpm list
```

---

## ç‰ˆæœ¬å·ç®¡ç†

### è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemVerï¼‰

ç‰ˆæœ¬å·æ ¼å¼ï¼š`ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·`

- **ä¸»ç‰ˆæœ¬å·**ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·**ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### ç‰ˆæœ¬èŒƒå›´

```json
{
  "dependencies": {
    "package": "^1.2.3",  // å…¼å®¹ç‰ˆæœ¬ï¼š>=1.2.3 <2.0.0
    "package": "~1.2.3",  // è¿‘ä¼¼ç‰ˆæœ¬ï¼š>=1.2.3 <1.3.0
    "package": "1.2.3",   // ç²¾ç¡®ç‰ˆæœ¬
    "package": "*",        // ä»»æ„ç‰ˆæœ¬
    "package": ">=1.2.3",  // å¤§äºç­‰äº
    "package": "1.2.3 - 1.3.0" // ç‰ˆæœ¬èŒƒå›´
  }
}
```

### ç‰ˆæœ¬é”å®šæ–‡ä»¶

- **npm**ï¼š`package-lock.json`
- **yarn**ï¼š`yarn.lock`
- **pnpm**ï¼š`pnpm-lock.yaml`

**æœ€ä½³å®è·µ**ï¼šå°†é”å®šæ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

---

## ä¾èµ–ç±»å‹

### dependencies

ç”Ÿäº§ç¯å¢ƒä¾èµ–ï¼š

```json
{
  "dependencies": {
    "react": "^18.0.0",
    "vue": "^3.0.0"
  }
}
```

### devDependencies

å¼€å‘ç¯å¢ƒä¾èµ–ï¼š

```json
{
  "devDependencies": {
    "webpack": "^5.0.0",
    "eslint": "^8.0.0"
  }
}
```

### peerDependencies

å¯¹ç­‰ä¾èµ–ï¼š

```json
{
  "peerDependencies": {
    "react": ">=16.8.0"
  }
}
```

### optionalDependencies

å¯é€‰ä¾èµ–ï¼š

```json
{
  "optionalDependencies": {
    "fsevents": "^2.0.0"
  }
}
```

---

## ä¾èµ–ç®¡ç†ç­–ç•¥

### å›ºå®šç‰ˆæœ¬ vs èŒƒå›´ç‰ˆæœ¬

#### å›ºå®šç‰ˆæœ¬ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

```json
{
  "dependencies": {
    "react": "18.2.0"
  }
}
```

**ä¼˜åŠ¿**ï¼šç‰ˆæœ¬ç¨³å®šï¼Œå¯é¢„æµ‹
**åŠ£åŠ¿**ï¼šéœ€è¦æ‰‹åŠ¨æ›´æ–°

#### èŒƒå›´ç‰ˆæœ¬ï¼ˆæ¨èå¼€å‘ç¯å¢ƒï¼‰

```json
{
  "dependencies": {
    "react": "^18.2.0"
  }
}
```

**ä¼˜åŠ¿**ï¼šè‡ªåŠ¨è·å–è¡¥ä¸å’Œæ¬¡è¦æ›´æ–°
**åŠ£åŠ¿**ï¼šå¯èƒ½å­˜åœ¨ä¸å…¼å®¹æ›´æ–°

### ä¾èµ–æ›´æ–°ç­–ç•¥

#### æ‰‹åŠ¨æ›´æ–°

```bash
# npm
npm update package-name
npm outdated

# yarn
yarn upgrade package-name
yarn outdated

# pnpm
pnpm update package-name
pnpm outdated
```

#### è‡ªåŠ¨æ›´æ–°å·¥å…·

- **npm-check-updates**ï¼šæ›´æ–° package.json
- **Renovate**ï¼šè‡ªåŠ¨åˆ›å»º PR
- **Dependabot**ï¼šGitHub è‡ªåŠ¨æ›´æ–°

---

## ä¾èµ–å†²çªæ·±åº¦è§£æä¸è§£å†³

### ä¾èµ–å†²çªçš„æ ¹æœ¬åŸå› 

#### 1. ç‰ˆæœ¬èŒƒå›´å¯¼è‡´çš„å†²çª

**åœºæ™¯**ï¼š
```json
// package-a/package.json
{
  "dependencies": {
    "lodash": "^4.17.0"  // å…è®¸ 4.17.0 åˆ° 5.0.0
  }
}

// package-b/package.json
{
  "dependencies": {
    "lodash": "^4.15.0"  // å…è®¸ 4.15.0 åˆ° 5.0.0
  }
}
```

**å†²çªåˆ†æ**ï¼š
- å¦‚æœå®‰è£… lodash@4.20.0ï¼Œä¸¤ä¸ªåŒ…éƒ½æ»¡è¶³
- å¦‚æœå®‰è£… lodash@4.14.0ï¼Œpackage-a ä¸æ»¡è¶³
- å¦‚æœå®‰è£… lodash@5.0.0ï¼Œä¸¤ä¸ªåŒ…éƒ½æ»¡è¶³ï¼Œä½†å¯èƒ½æœ‰ç ´åæ€§å˜æ›´

#### 2. ä¾èµ–æå‡å¯¼è‡´çš„å†²çª

**npm/yarn çš„ä¾èµ–æå‡ç®—æ³•**ï¼š
```javascript
// ä¾èµ–æ ‘
A -> B@1.0.0 -> C@1.0.0
A -> D -> C@2.0.0

// æå‡å
node_modules/
â”œâ”€â”€ B@1.0.0/
â”œâ”€â”€ C@1.0.0/  // æå‡åˆ°é¡¶å±‚
â””â”€â”€ D/
    â””â”€â”€ node_modules/
        â””â”€â”€ C@2.0.0/  // æ— æ³•æå‡ï¼Œå†²çª
```

**é—®é¢˜**ï¼š
- D å¯èƒ½é”™è¯¯åœ°ä½¿ç”¨äº† C@1.0.0ï¼ˆæå‡ç‰ˆæœ¬ï¼‰
- å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯

#### 3. å¯¹ç­‰ä¾èµ–å†²çª

**åœºæ™¯**ï¼š
```json
// package-a/package.json
{
  "peerDependencies": {
    "react": ">=16.8.0"
  }
}

// package-b/package.json
{
  "peerDependencies": {
    "react": ">=18.0.0"
  }
}
```

**å†²çª**ï¼š
- å¦‚æœé¡¹ç›®ä½¿ç”¨ react@17.0.0ï¼Œpackage-b ä¸æ»¡è¶³
- éœ€è¦å‡çº§åˆ° react@18.0.0

### ä¾èµ–åˆ†æå·¥å…·

#### 1. å¯è§†åŒ–ä¾èµ–æ ‘

```bash
# npm
npm list --all --depth=10

# ä½¿ç”¨å·¥å…·
npx npm-check-updates
npx depcheck  # æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–
npx npm-why lodash  # æŸ¥çœ‹ä¸ºä»€ä¹ˆå®‰è£… lodash
```

#### 2. ä¾èµ–å†²çªæ£€æµ‹

```bash
# æ£€æŸ¥è¿‡æ—¶çš„ä¾èµ–
npm outdated

# æ£€æŸ¥å®‰å…¨æ¼æ´
npm audit

# è¯¦ç»†å®¡è®¡
npm audit --json | jq
```

#### 3. ä¾èµ–åˆ†æå·¥å…·

```bash
# å®‰è£…
npm install -g npm-check-updates depcheck

# æ£€æŸ¥æ›´æ–°
ncu  # æ˜¾ç¤ºå¯æ›´æ–°çš„åŒ…
ncu -u  # æ›´æ–° package.json

# æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–
depcheck
```

### å†²çªè§£å†³ç­–ç•¥

#### ç­–ç•¥ 1ï¼šç‰ˆæœ¬ç»Ÿä¸€ï¼ˆæ¨èï¼‰

**ä½¿ç”¨ resolutions/overrides**ï¼š

```json
// package.json (yarn/pnpm)
{
  "resolutions": {
    "lodash": "4.17.21",  // å¼ºåˆ¶æ‰€æœ‰åŒ…ä½¿ç”¨æ­¤ç‰ˆæœ¬
    "react": "18.2.0",
    "**/react-dom": "18.2.0"  // é€šé…ç¬¦åŒ¹é…
  }
}

// package.json (npm 8.3+)
{
  "overrides": {
    "lodash": "4.17.21",
    "react": "18.2.0",
    "my-package": {
      "lodash": "4.17.21"  // åµŒå¥—è¦†ç›–
    }
  }
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- å¯èƒ½ç ´åæŸäº›åŒ…çš„å…¼å®¹æ€§
- éœ€è¦å……åˆ†æµ‹è¯•
- ä¼˜å…ˆä½¿ç”¨è¡¥ä¸ç‰ˆæœ¬ç»Ÿä¸€

#### ç­–ç•¥ 2ï¼šä¾èµ–éš”ç¦»ï¼ˆpnpm ä¼˜åŠ¿ï¼‰

**pnpm çš„ä¸¥æ ¼æ¨¡å¼**ï¼š
```javascript
// .npmrc
shamefully-hoist=false  // ç¦ç”¨æå‡ï¼ˆé»˜è®¤ï¼‰
```

**æ•ˆæœ**ï¼š
- æ¯ä¸ªåŒ…åªèƒ½è®¿é—®è‡ªå·±å£°æ˜çš„ä¾èµ–
- é¿å…å¹½çµä¾èµ–
- å¼ºåˆ¶æ˜¾å¼å£°æ˜æ‰€æœ‰ä¾èµ–

#### ç­–ç•¥ 3ï¼šä¾èµ–æ›¿æ¢

**åœºæ™¯**ï¼šæ›¿æ¢æœ‰é—®é¢˜çš„ä¾èµ–

```json
// package.json
{
  "dependencies": {
    "old-package": "npm:new-package@1.0.0"
  }
}
```

#### ç­–ç•¥ 4ï¼šæ‰‹åŠ¨è§£å†³

**æ­¥éª¤**ï¼š
1. åˆ†æå†²çªåŸå› 
2. ç¡®å®šå…¼å®¹ç‰ˆæœ¬
3. æ›´æ–° package.json
4. åˆ é™¤é”å®šæ–‡ä»¶å’Œ node_modules
5. é‡æ–°å®‰è£…

```bash
# æ¸…ç†
rm -rf node_modules package-lock.json yarn.lock pnpm-lock.yaml

# é‡æ–°å®‰è£…
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
```

### ä¾èµ–å†²çªé¢„é˜²

#### 1. ä½¿ç”¨ç²¾ç¡®ç‰ˆæœ¬ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```json
{
  "dependencies": {
    "lodash": "4.17.21"  // ç²¾ç¡®ç‰ˆæœ¬
  }
}
```

#### 2. å®šæœŸæ›´æ–°ä¾èµ–

```bash
# æ£€æŸ¥è¿‡æ—¶ä¾èµ–
npm outdated

# ä½¿ç”¨å·¥å…·è‡ªåŠ¨æ›´æ–°
npx npm-check-updates -u
```

#### 3. ä½¿ç”¨ä¾èµ–é”å®šæ–‡ä»¶

**æœ€ä½³å®è·µ**ï¼š
- æäº¤é”å®šæ–‡ä»¶åˆ°ç‰ˆæœ¬æ§åˆ¶
- å›¢é˜Ÿä½¿ç”¨ç›¸åŒçš„åŒ…ç®¡ç†å™¨
- CI/CD ä½¿ç”¨é”å®šæ–‡ä»¶å®‰è£…

#### 4. ä¾èµ–å®¡è®¡

```bash
# å®šæœŸå®¡è®¡
npm audit
npm audit fix

# è‡ªåŠ¨ä¿®å¤ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
npm audit fix --force
```

### å®é™…æ¡ˆä¾‹ï¼šReact ç‰ˆæœ¬å†²çª

**é—®é¢˜**ï¼š
```
Error: Invalid hook call. Hooks can only be called inside of the body of a function component.
```

**åŸå› **ï¼š
- é¡¹ç›®ä½¿ç”¨ react@18.0.0
- æŸä¸ªä¾èµ–éœ€è¦ react@17.0.0
- å¯¼è‡´å¤šä¸ª React å®ä¾‹

**è§£å†³**ï¼š
```json
{
  "resolutions": {
    "react": "18.2.0",
    "react-dom": "18.2.0"
  }
}
```

**éªŒè¯**ï¼š
```bash
# æ£€æŸ¥ React å®ä¾‹æ•°é‡
npm list react
# åº”è¯¥åªæœ‰ä¸€ä¸ªç‰ˆæœ¬
```

---

## æ€§èƒ½ä¼˜åŒ–

### npm

```bash
# ä½¿ç”¨ç¼“å­˜
npm config set cache /path/to/cache

# å¹¶è¡Œå®‰è£…
npm install --prefer-offline
```

### yarn

```bash
# ä½¿ç”¨ç¼“å­˜
yarn cache dir

# ç¦»çº¿æ¨¡å¼
yarn install --offline
```

### pnpm

```bash
# ä½¿ç”¨å­˜å‚¨
pnpm store path

# æ¸…ç†æœªä½¿ç”¨çš„åŒ…
pnpm store prune
```

---

## å®‰å…¨æœ€ä½³å®è·µ

### å®¡è®¡ä¾èµ–

```bash
# npm
npm audit
npm audit fix

# yarn
yarn audit
yarn audit fix

# pnpm
pnpm audit
pnpm audit --fix
```

### ä½¿ç”¨ .npmrc

```ini
# .npmrc
save-exact=true
package-lock=true
audit=true
```

---

## å·¥å…·é€‰æ‹©å»ºè®®

### æ–°é¡¹ç›®

- **æ¨è pnpm**ï¼šæ€§èƒ½å¥½ï¼Œç£ç›˜å ç”¨å°
- **æˆ– yarn**ï¼šç”Ÿæ€æˆç†Ÿï¼ŒåŠŸèƒ½ä¸°å¯Œ

### ç°æœ‰é¡¹ç›®

- **ä¿æŒç°æœ‰å·¥å…·**ï¼šé¿å…è¿ç§»æˆæœ¬
- **é€æ­¥è¿ç§»**ï¼šå¯ä»¥é€æ­¥è¿ç§»åˆ° pnpm

### å¤§å‹é¡¹ç›®

- **pnpm**ï¼šä¸¥æ ¼ä¾èµ–ï¼Œé¿å…å¹½çµä¾èµ–
- **yarn workspaces**ï¼šMonorepo æ”¯æŒ

---

## æœ€ä½³å®è·µ

1. **ä½¿ç”¨é”å®šæ–‡ä»¶**ï¼šæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
2. **å›ºå®šç”Ÿäº§ä¾èµ–ç‰ˆæœ¬**ï¼šä½¿ç”¨ç²¾ç¡®ç‰ˆæœ¬
3. **å®šæœŸæ›´æ–°ä¾èµ–**ï¼šä½¿ç”¨å·¥å…·æ£€æŸ¥è¿‡æ—¶ä¾èµ–
4. **å®¡è®¡å®‰å…¨æ¼æ´**ï¼šå®šæœŸè¿è¡Œ audit
5. **ä½¿ç”¨ .npmrc**ï¼šç»Ÿä¸€é…ç½®
6. **æ¸…ç†æœªä½¿ç”¨ä¾èµ–**ï¼šå®šæœŸæ¸…ç†

---

## ç›¸å…³é“¾æ¥

- [npm å®˜æ–¹æ–‡æ¡£](https://docs.npmjs.com/)
- [yarn å®˜æ–¹æ–‡æ¡£](https://yarnpkg.com/)
- [pnpm å®˜æ–¹æ–‡æ¡£](https://pnpm.io/)
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/)
- [å·¥å…·é“¾ä¸æ„å»º MOC](./!MOC-å·¥å…·é“¾ä¸æ„å»º.md)

---

**æœ€åæ›´æ–°**ï¼š2025

---

#åŒ…ç®¡ç† #npm #yarn #pnpm #å·¥ç¨‹åŒ–

