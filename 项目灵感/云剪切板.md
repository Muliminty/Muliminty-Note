## ğŸ–¥ï¸ åç«¯ (Node.js + Express + SQLite)

å®‰è£…ä¾èµ–ï¼š

```bash
npm init -y
npm install express sqlite3
```

æ–°å»º `server.js`ï¼š

```js
const express = require('express');
const sqlite3 = require('sqlite3').verbose();
const bodyParser = require('body-parser');
const path = require('path');

const app = express();
const db = new sqlite3.Database('./clipboard.db');

// åˆ›å»ºè¡¨
db.serialize(() => {
  db.run(`CREATE TABLE IF NOT EXISTS clipboard (
    code TEXT PRIMARY KEY,
    text TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
  )`);
});

// è§£æ JSON
app.use(bodyParser.json());
app.use(express.static(path.join(__dirname, 'public')));

// ç”ŸæˆéšæœºéªŒè¯ç 
function generateCode(length = 6) {
  return Math.random().toString(36).substr(2, length);
}

// ä¸Šä¼ æ–‡æœ¬
app.post('/clipboard', (req, res) => {
  const { text } = req.body;
  if (!text) {
    return res.status(400).json({ success: false, msg: 'text ä¸èƒ½ä¸ºç©º' });
  }

  const code = generateCode(6);

  db.run(`INSERT INTO clipboard (code, text) VALUES (?, ?)`, [code, text], function (err) {
    if (err) return res.status(500).json({ success: false, msg: 'æ•°æ®åº“é”™è¯¯' });
    res.json({ success: true, code });
  });
});

// è·å–æ–‡æœ¬
app.get('/clipboard/:code', (req, res) => {
  const { code } = req.params;
  db.get(`SELECT text FROM clipboard WHERE code = ?`, [code], (err, row) => {
    if (err) return res.status(500).json({ success: false, msg: 'æ•°æ®åº“é”™è¯¯' });
    if (!row) return res.status(404).json({ success: false, msg: 'æœªæ‰¾åˆ°' });
    res.json({ success: true, text: row.text });
  });
});

// ç®€å•æ¸…ç†æ¥å£ï¼ˆå¯é€‰ï¼‰
app.delete('/clipboard/:code', (req, res) => {
  const { code } = req.params;
  db.run(`DELETE FROM clipboard WHERE code = ?`, [code], function (err) {
    if (err) return res.status(500).json({ success: false, msg: 'æ•°æ®åº“é”™è¯¯' });
    res.json({ success: true, deleted: this.changes });
  });
});

const PORT = 3000;
app.listen(PORT, () => {
  console.log(`ğŸš€ Server running at http://localhost:${PORT}`);
});
```

---

## ğŸŒ å‰ç«¯ (ç®€å• HTML é¡µé¢)

åœ¨ `public/index.html` æ–°å»ºé¡µé¢ï¼š

```html
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>äº‘å‰ªåˆ‡æ¿</title>
  <style>
    body { font-family: sans-serif; margin: 40px; }
    textarea { width: 100%; height: 100px; }
    input { padding: 6px; margin: 6px 0; }
    button { padding: 6px 12px; margin: 6px 0; }
    .box { margin-bottom: 20px; }
  </style>
</head>
<body>
  <h1>äº‘å‰ªåˆ‡æ¿</h1>

  <div class="box">
    <h3>ä¸Šä¼ æ–‡æœ¬</h3>
    <textarea id="uploadText"></textarea><br />
    <button onclick="upload()">ä¸Šä¼ </button>
    <p id="uploadResult"></p>
  </div>

  <div class="box">
    <h3>è·å–æ–‡æœ¬</h3>
    <input id="code" placeholder="è¾“å…¥éªŒè¯ç " />
    <button onclick="fetchText()">è·å–</button>
    <p id="fetchResult"></p>
  </div>

  <script>
    async function upload() {
      const text = document.getElementById('uploadText').value;
      const res = await fetch('/clipboard', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text })
      });
      const data = await res.json();
      if (data.success) {
        document.getElementById('uploadResult').innerText = "éªŒè¯ç ï¼š" + data.code;
      } else {
        document.getElementById('uploadResult').innerText = "ä¸Šä¼ å¤±è´¥: " + data.msg;
      }
    }

    async function fetchText() {
      const code = document.getElementById('code').value.trim();
      const res = await fetch('/clipboard/' + code);
      const data = await res.json();
      if (data.success) {
        document.getElementById('fetchResult').innerText = "å†…å®¹ï¼š" + data.text;
      } else {
        document.getElementById('fetchResult').innerText = "è·å–å¤±è´¥: " + data.msg;
      }
    }
  </script>
</body>
</html>
```

---

## ğŸš€ è¿è¡Œ

```bash
node server.js
```

æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000/) å°±å¯ä»¥ä½¿ç”¨äº†ã€‚

### ğŸ”® å¯æ‰©å±•åŠŸèƒ½

- æ–‡æœ¬æœ‰æ•ˆæœŸï¼ˆSQLite é‡ŒåŠ  `expire_at` å­—æ®µï¼Œå®šæœŸæ¸…ç†ï¼‰
    
- éªŒè¯ç äºŒç»´ç ï¼ˆå‰ç«¯ç”¨ `qrcode.js` ç”Ÿæˆï¼Œæ‰‹æœºæ‰«ç ç›´æ¥å¡« codeï¼‰
    
- å¤šç«¯åŒæ­¥ï¼ˆåŠ ç”¨æˆ·ç™»å½•ï¼Œæ”¯æŒå¤šæ¡è®°å½•ï¼‰
