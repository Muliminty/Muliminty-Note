# æ•°æ®æŒä¹…åŒ–ç­–ç•¥

> Docker å®¹å™¨æ•°æ®æŒä¹…åŒ–çš„ç­–ç•¥å’Œæœ€ä½³å®è·µ

---

## ğŸ“‹ ç›®å½•

- [æ•°æ®å·ç”Ÿå‘½å‘¨æœŸ](#æ•°æ®å·ç”Ÿå‘½å‘¨æœŸ)
- [æ•°æ®å·å¤‡ä»½](#æ•°æ®å·å¤‡ä»½)
- [æ•°æ®å·æ¢å¤](#æ•°æ®å·æ¢å¤)
- [æ•°æ®è¿ç§»](#æ•°æ®è¿ç§»)
- [æ•°æ®å·é©±åŠ¨](#æ•°æ®å·é©±åŠ¨)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## æ•°æ®å·ç”Ÿå‘½å‘¨æœŸ

### æ•°æ®å·åˆ›å»º

```bash
# åˆ›å»ºæ•°æ®å·
docker volume create my-volume

# ä½¿ç”¨æ•°æ®å·
docker run -d -v my-volume:/data nginx:latest
```

### æ•°æ®å·åˆ é™¤

```bash
# åˆ é™¤æ•°æ®å·
docker volume rm my-volume

# åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„æ•°æ®å·
docker volume prune
```

---

## æ•°æ®å·å¤‡ä»½

### å¤‡ä»½æ–¹æ³•

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨ä¸´æ—¶å®¹å™¨
docker run --rm \
  -v my-volume:/data \
  -v $(pwd):/backup \
  ubuntu:20.04 \
  tar czf /backup/backup.tar.gz /data

# æ–¹æ³• 2ï¼šç›´æ¥å¤‡ä»½
docker run --rm \
  -v my-volume:/data \
  ubuntu:20.04 \
  tar czf - /data > backup.tar.gz
```

### å®šæ—¶å¤‡ä»½

```bash
# ä½¿ç”¨ cron å®šæ—¶å¤‡ä»½
0 2 * * * docker run --rm -v my-volume:/data -v /backup:/backup ubuntu:20.04 tar czf /backup/backup-$(date +\%Y\%m\%d).tar.gz /data
```

---

## æ•°æ®å·æ¢å¤

### æ¢å¤æ–¹æ³•

```bash
# æ¢å¤æ•°æ®å·
docker run --rm \
  -v my-volume:/data \
  -v $(pwd):/backup \
  ubuntu:20.04 \
  tar xzf /backup/backup.tar.gz -C /
```

---

## æ•°æ®è¿ç§»

### è¿ç§»åˆ°æ–°ä¸»æœº

```bash
# 1. å¤‡ä»½æ•°æ®å·
docker run --rm -v my-volume:/data ubuntu:20.04 tar czf - /data > backup.tar.gz

# 2. ä¼ è¾“åˆ°æ–°ä¸»æœº
scp backup.tar.gz user@new-host:/path/

# 3. åœ¨æ–°ä¸»æœºæ¢å¤
docker volume create my-volume
docker run --rm -v my-volume:/data -v /path:/backup ubuntu:20.04 tar xzf /backup/backup.tar.gz -C /
```

---

## æ•°æ®å·é©±åŠ¨

### ä½¿ç”¨ä¸åŒé©±åŠ¨

```bash
# ä½¿ç”¨æœ¬åœ°é©±åŠ¨
docker volume create --driver local my-volume

# ä½¿ç”¨ NFS é©±åŠ¨
docker volume create \
  --driver local \
  --opt type=nfs \
  --opt device=:/path/to/nfs \
  my-volume
```

---

## æœ€ä½³å®è·µ

### 1. ä½¿ç”¨å‘½åæ•°æ®å·

```bash
# ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‘½åæ•°æ®å·
docker run -d -v db-data:/var/lib/postgresql/data postgres:13
```

### 2. å®šæœŸå¤‡ä»½

```bash
# è®¾ç½®å®šæ—¶å¤‡ä»½ä»»åŠ¡
```

### 3. æ•°æ®å·å‘½åè§„èŒƒ

```bash
# ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°
docker volume create app-db-data
docker volume create app-uploads
```

### 4. ç›‘æ§æ•°æ®å·ä½¿ç”¨

```bash
# æŸ¥çœ‹æ•°æ®å·ä½¿ç”¨æƒ…å†µ
docker system df -v
```

---

## ğŸ“š å‚è€ƒèµ„æº

- [Docker å®˜æ–¹æ–‡æ¡£ - æ•°æ®å·](https://docs.docker.com/storage/volumes/)
- [Docker å®˜æ–¹æ–‡æ¡£ - æ•°æ®å¤‡ä»½](https://docs.docker.com/storage/backup-volumes/)

---

[[!MOC-Docker|è¿”å› Docker çŸ¥è¯†ä½“ç³»]]

#Docker #æ•°æ®æŒä¹…åŒ– #æ•°æ®å·
