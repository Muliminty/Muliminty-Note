# æ¨¡å—ç³»ç»Ÿï¼ˆCommonJS & ES Modulesï¼‰

Node.js æ”¯æŒä¸¤ç§æ¨¡å—ç³»ç»Ÿï¼šCommonJS å’Œ ES Modulesã€‚

---

## ğŸ“š CommonJS

Node.js é»˜è®¤çš„æ¨¡å—ç³»ç»Ÿã€‚

### å¯¼å‡º

```javascript
// math.js
function add(a, b) {
  return a + b;
}

// æ–¹å¼ä¸€ï¼šmodule.exports
module.exports = {
  add
};

// æ–¹å¼äºŒï¼šexports
exports.add = add;
```

### å¯¼å…¥

```javascript
// app.js
const { add } = require('./math.js');
// æˆ–
const math = require('./math.js');
console.log(math.add(1, 2));
```

### ç‰¹ç‚¹

- åŒæ­¥åŠ è½½
- è¿è¡Œæ—¶è§£æ
- é€‚åˆæœåŠ¡ç«¯

---

## ğŸ¯ ES Modules

ES6 æ¨¡å—ç³»ç»Ÿï¼Œéœ€è¦é…ç½®å¯ç”¨ã€‚

### å¯ç”¨ ES Modules

#### æ–¹å¼ä¸€ï¼špackage.json

```json
{
  "type": "module"
}
```

#### æ–¹å¼äºŒï¼šæ–‡ä»¶æ‰©å±•å

ä½¿ç”¨ `.mjs` æ‰©å±•åï¼š

```javascript
// math.mjs
export function add(a, b) {
  return a + b;
}
```

### å¯¼å‡º

```javascript
// math.js
export function add(a, b) {
  return a + b;
}

export default {
  multiply(a, b) {
    return a * b;
  }
};
```

### å¯¼å…¥

```javascript
// app.js
import { add } from './math.js';
import math from './math.js';
```

---

## ğŸ”„ äº’æ“ä½œæ€§

### CommonJS ä¸­ä½¿ç”¨ ES Modules

```javascript
// ä½¿ç”¨åŠ¨æ€ import
const math = await import('./math.mjs');
```

### ES Modules ä¸­ä½¿ç”¨ CommonJS

```javascript
// å¯ä»¥å¯¼å…¥ CommonJS æ¨¡å—
import math from './math.cjs';
```

---

## ğŸ’¡ é€‰æ‹©å»ºè®®

### ä½¿ç”¨ CommonJS

- ä¼ ç»Ÿ Node.js é¡¹ç›®
- éœ€è¦å…¼å®¹æ—§ç‰ˆæœ¬
- ç®€å•è„šæœ¬

### ä½¿ç”¨ ES Modules

- æ–°é¡¹ç›®
- éœ€è¦ Tree shaking
- å‰åç«¯ä»£ç å…±äº«

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [Node.js ç®€ä»‹ä¸ç‰¹ç‚¹](./Node.jsç®€ä»‹ä¸ç‰¹ç‚¹.md) â€” Node.js æ¦‚è¿°
- [æ ¸å¿ƒæ¨¡å—](./æ ¸å¿ƒæ¨¡å—.md) â€” Node.js å†…ç½®æ¨¡å—
- [JavaScript æ¨¡å—åŒ–](../../../00-å‰ç«¯ä½“ç³»/01-åŸºç¡€å…¥é—¨/JavaScript/03-æ¨¡å—åŒ–/README.md) â€” JavaScript æ¨¡å—åŒ–è¯¦è§£

---

**å‚è€ƒ**ï¼š
- [Node.js Modules](https://nodejs.org/api/modules.html)
- [ECMAScript Modules](https://nodejs.org/api/esm.html)

---

#nodejs #æ¨¡å—ç³»ç»Ÿ #commonjs #es-modules
