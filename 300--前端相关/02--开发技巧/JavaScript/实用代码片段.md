# 实用代码片段

## mock

### 模拟接口

```javaScript
  const waitTime = (time = 2000) => {
    return new Promise((resolve) => {
      setTimeout(() => {
        resolve(true);
      }, time);
    });
  };

cosnt search =async () => {

    await waitTime()
}

```

## dom操作

### 模拟鼠标点击

```JSX
const a = document.querySelector('a[href="#1"]');
if (a) a.dispatchEvent(new MouseEvent('click', {bubbles: true}));
```

## 字符串

### 获取字符串字节数/字符数

[[../框架&库/Ant Design/Form/validator 动态校验表单#限制只能输入指定字符长度|使用场景]]

```
//返回字符串的总字节数 
let byteleng = strval.replace(/[^\x00-\xff]/g,'**').length;
```


## 工具函数

### 计算表格数据的最后一页有几条数据 
#antd/table 
``` js
  /**
   * @param {*} totalCount 总数
   * @param {*} pageSize 一页几条
   * @param {*} totalPages 一共几页
   */
  const calculateLastPageCount = (totalCount, pageSize, totalPages) => {
    const remainder = totalCount % pageSize;
    if (totalPages === 1) {
      return remainder === 0 ? pageSize : remainder;
    } else {
      return remainder === 0 ? pageSize : remainder;
    }
  }
```