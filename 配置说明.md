# Quartz 配置说明

## ✅ 已启用的功能

### 1. 📑 目录功能（Table of Contents）

**配置位置**：`quartz.config.ts` → `transformers` → `Plugin.TableOfContents()`

**功能说明**：
- ✅ 自动生成文章目录
- ✅ 显示在右侧边栏（桌面端）
- ✅ 显示在移动端页面顶部
- ✅ 支持多级标题（最多 6 级）
- ✅ 点击目录项可跳转到对应章节

**配置选项**：
```typescript
Plugin.TableOfContents({
  minEntries: 1,        // 最少条目数（1 个标题就显示目录）
  maxDepth: 6,         // 最大深度（支持 6 级标题）
  collapseByDefault: false,  // 默认不折叠
  showByDefault: true,       // 默认显示
})
```

### 2. 🔍 搜索功能（Full Text Search）

**配置位置**：
- `quartz.config.ts` → `emitters` → `Plugin.Search()`（生成搜索索引）
- `quartz.layout.ts` → `left` → `Component.Search()`（显示搜索组件）

**功能说明**：
- ✅ 全文搜索所有笔记内容
- ✅ 搜索框显示在左侧边栏顶部
- ✅ 支持中文搜索
- ✅ 实时搜索结果预览
- ✅ 键盘快捷键：`Ctrl/Cmd + K` 快速打开搜索

**使用方式**：
1. 点击左侧边栏顶部的搜索框
2. 或使用快捷键 `Ctrl/Cmd + K`
3. 输入关键词搜索
4. 点击搜索结果跳转到对应页面

### 3. 📁 文件目录浏览器（Explorer）

**配置位置**：`quartz.layout.ts` → `left` → `Component.Explorer()`

**功能说明**：
- ✅ 显示完整的文件目录结构
- ✅ 支持文件夹折叠/展开
- ✅ 点击文件跳转到对应页面
- ✅ 自动保存展开状态（本地存储）

**配置选项**：
```typescript
Component.Explorer({
  title: "📁 目录",           // 标题
  folderClickBehavior: "collapse",  // 点击文件夹：折叠/展开
  folderDefaultState: "collapsed",  // 默认状态：折叠
  useSavedState: true,              // 保存状态到本地存储
})
```

### 4. 🗺️ 知识图谱（Graph）

**配置位置**：`quartz.layout.ts` → `left` → `Component.Graph()`

**功能说明**：
- ✅ 可视化笔记之间的链接关系
- ✅ 本地图谱：显示当前页面的链接关系
- ✅ 全局图谱：显示整个知识库的链接关系
- ✅ 支持拖拽和缩放
- ✅ 点击节点跳转到对应页面

### 5. 🔗 反向链接（Backlinks）

**配置位置**：`quartz.layout.ts` → `right` → `Component.Backlinks()`

**功能说明**：
- ✅ 显示哪些页面链接到当前页面
- ✅ 帮助发现相关笔记
- ✅ 显示在右侧边栏（桌面端）

### 6. 📌 最近笔记（Recent Notes）

**配置位置**：`quartz.layout.ts` → `left` → `Component.RecentNotes()`

**功能说明**：
- ✅ 显示最近更新的 5 篇笔记
- ✅ 仅桌面端显示
- ✅ 方便快速访问最近编辑的内容

### 7. 🏷️ 标签列表（Tag List）

**配置位置**：
- `quartz.layout.ts` → `left` → `Component.TagList()`（侧边栏）
- `quartz.layout.ts` → `beforeBody` → `Component.TagList()`（文章顶部）

**功能说明**：
- ✅ 显示所有标签（按使用频率排序）
- ✅ 侧边栏显示前 10 个标签
- ✅ 文章顶部显示当前文章的标签
- ✅ 点击标签查看所有相关笔记

## 📱 响应式设计

### 桌面端布局
- **左侧边栏**：搜索、目录浏览器、最近笔记、标签、知识图谱
- **右侧边栏**：文章目录、反向链接
- **文章内容**：中间区域

### 移动端布局
- **顶部**：搜索框、文章目录
- **底部**：目录浏览器、反向链接
- **文章内容**：中间区域

## 🎨 自定义配置

### 修改侧边栏顺序

编辑 `quartz.layout.ts` 文件，调整 `left` 和 `right` 数组中的组件顺序：

```typescript
const left: Component.ComponentId[] = [
  Component.PageTitle(),      // 页面标题
  Component.Search(),          // 搜索（保持在前）
  Component.Darkmode(),        // 深色模式切换
  Component.Explorer(),        // 目录浏览器
  // ... 其他组件
]
```

### 隐藏某些组件

注释掉不需要的组件：

```typescript
const left: Component.ComponentId[] = [
  Component.PageTitle(),
  Component.Search(),
  // Component.Graph(),  // 隐藏知识图谱
  // Component.RecentNotes(),  // 隐藏最近笔记
]
```

### 调整搜索范围

可以在 `Plugin.Search()` 中配置搜索选项（如果需要）：

```typescript
Plugin.Search({
  // 可以添加搜索选项，例如：
  // fuseOptions: { ... },  // Fuse.js 搜索选项
  // frontmatter: { ... },  // 前置元数据搜索配置
})
```

## 🚀 使用提示

1. **快速搜索**：使用 `Ctrl/Cmd + K` 快捷键快速打开搜索
2. **导航**：使用左侧的目录浏览器快速跳转到任意笔记
3. **探索**：使用知识图谱发现笔记之间的关联
4. **标签**：使用标签功能组织和管理笔记
5. **反向链接**：查看反向链接发现相关内容

## ❓ 常见问题

### Q: 搜索功能不工作？

**A**: 确保已运行 `npm install` 安装所有依赖，然后重新构建：
```bash
npm run build
```

### Q: 目录不显示？

**A**: 确保文章中有至少一个标题（`#` 开头），并且 `Plugin.TableOfContents()` 已添加到 `transformers` 中。

### Q: 如何调整目录显示位置？

**A**: 编辑 `quartz.layout.ts`，将 `Component.TableOfContents()` 移动到 `left` 或 `right` 数组中。

### Q: 如何禁用某些功能？

**A**: 在 `quartz.layout.ts` 中注释掉对应的组件，或在 `quartz.config.ts` 中移除对应的插件。

---

**提示**：修改配置后需要重新构建才能生效：
```bash
npm run build
```

