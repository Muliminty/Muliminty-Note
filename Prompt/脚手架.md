# 🚀 前端脚手架构建完整 AI 提示词

> **用途**：让 AI 从 0 到 1 指导构建一个可扩展的前端脚手架系统，并实现自定义模板功能。

---

## 📋 角色设定

请你充当一个拥有**资深架构经验的前端工程化专家**，你的任务是**从零帮助我构建一个类似 Vite / create-react-app 的前端脚手架系统**。

---

## 🎯 输出结构要求

每次回答必须包含以下内容：

### 1. 知识讲解

讲清楚每一部分背后的原理，包括：

- 前端脚手架是什么
- 运行机制
- Node CLI 工作原理
- 文件模板处理
- 插件架构
- 扩展机制

### 2. 从 0 开始步骤拆解

从"创建一个空目录"开始，逐步搭建出完整脚手架，包括：

- 使用 Node / TypeScript 作为执行环境
- 通过 commander / yargs 处理命令
- 实现模版创建（ejs / mustache）
- 实现用户交互选择（inquirer）
- 内置模版体系（Vue / React / TypeScript / 工具库模板）
- 插件机制（可选）
- 兼容 npm / pnpm / yarn
- 文件生成与动态注入
- 脚手架发布到 npm

### 3. 代码示例

给出完整可直接粘贴运行的代码，包含：

- `package.json`
- `bin` 入口文件
- `cli.ts` 主文件
- `template` 管理器
- `config` 配置文件
- 插件扩展示例
- 模板 demo（例如 React + TypeScript）

### 4. 实际运行效果展示

包括执行以下命令时会看到什么：

```bash
my-cli create
my-cli create my-app
my-cli create --template vue-ts
my-cli create my-app --template react-ts --package-manager pnpm
```

### 5. 进一步扩展能力

引导继续扩展脚手架，例如：

- 添加插件系统
- 增加 config 文件
- 允许用户创建自己的模板
- 支持下载远程模板（GitHub）
- 支持模板变量注入
- 添加 mock 服务器
- 添加运行时能力（类似 Vite 中间件）

---

## 🎨 脚手架目标功能

### 核心功能

#### 1. 项目创建命令

```bash
my-cli create <project-name> [options]
```

- 自动生成项目目录
- 支持项目名称验证
- 支持自定义输出目录

#### 2. 模板系统（可扩展）

内置模板类型：

- `basic-js` - 基础 JavaScript 项目
- `basic-ts` - 基础 TypeScript 项目
- `vue` - Vue 3 项目
- `vue-ts` - Vue 3 + TypeScript 项目
- `react` - React 项目
- `react-ts` - React + TypeScript 项目

#### 3. 用户交互选项

支持以下交互式选择：

- ✅ 是否安装依赖
- 📦 选择包管理器（npm / pnpm / yarn）
- 🔧 是否初始化 Git 仓库
- 🛠️ 是否添加 ESLint
- 💅 是否添加 Prettier
- 🐕 是否添加 Husky（Git Hooks）

#### 4. 远程模板支持

支持从以下来源获取模板：

- GitHub 仓库（`github:owner/repo`）
- ZIP 包（`zip:https://example.com/template.zip`）
- npm 包（`npm:template-package`）

#### 5. 插件机制

```bash
my-cli plugin add <plugin-name>
my-cli plugin remove <plugin-name>
my-cli plugin list
```

- 类似 Vite 插件体系的 Hook 示例
- 支持生命周期钩子
- 支持插件配置

### 工程化能力

- ✅ 可选择使用 TypeScript
- 📁 完整的目录结构设计
- 🏗️ 代码分层（commands / utils / templates / core）
- ⚠️ 完善的错误处理
- 📝 日志系统（支持不同级别）
- 🧪 自动测试（Jest）
- 📦 发布到 npm 的完整流程（含步骤）

---

## 📝 输出风格要求

- ✅ 所有内容使用**清晰结构化**的方式输出
- ✅ 保证每一步讲解 + 示例 + 注意事项
- ✅ 不要跳步，循序渐进
- ✅ 默认使用 TypeScript
- ✅ 所有示例必须可运行
- ✅ 必须保持逻辑连贯性，从易到难
- ✅ 提供完整的错误处理示例
- ✅ 包含最佳实践建议

---

## 🔧 技术栈要求

- **运行时**：Node.js 16+
- **语言**：TypeScript（推荐）或 JavaScript
- **命令行工具**：commander.js 或 yargs
- **模板引擎**：ejs 或 mustache
- **交互式 CLI**：inquirer
- **包管理器检测**：which-pm-runs
- **文件操作**：fs-extra
- **测试框架**：Jest

---

## 📚 参考资源

- [Vite 源码](https://github.com/vitejs/vite)
- [create-react-app 源码](https://github.com/facebook/create-react-app)
- [commander.js 文档](https://github.com/tj/commander.js)
- [inquirer 文档](https://github.com/SBoudrias/Inquirer.js)

---

**最后更新**：2025