
### ğŸ§© 1. æ€»ä½“æ¶æ„
```
æœ¬åœ°å¼€å‘ â†’ git push â†’ æœåŠ¡å™¨ Hook â†’ è‡ªåŠ¨ build â†’ Docker é‡å¯ â†’ Nginx é›¶ä¸­æ–­
```

---

### ğŸ› ï¸ 2. ç¯å¢ƒå‡†å¤‡ï¼ˆä¸€æ¬¡æ€§ï¼‰
| ç»„ä»¶ | å‘½ä»¤ |
|---|---|
| **Ubuntu 22.04+** | å·²æœ‰ |
| **Docker** | `sudo apt install docker.io` |
| **Docker Compose** | `sudo apt install docker-compose-plugin` |
| **Git** | `sudo apt install git` |
| **Nginx** | `sudo apt install nginx` |

---

### ğŸ“ 3. é¡¹ç›®ç›®å½•ï¼ˆç¤ºä¾‹ï¼‰
```
/home/muliminty/app
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ .git/hooks/post-receive   â† è‡ªåŠ¨éƒ¨ç½²è§¦å‘å™¨
â””â”€â”€ dist/                     â† æ„å»ºäº§ç‰©ï¼ˆå‰ç«¯ï¼‰æˆ– jarï¼ˆåç«¯ï¼‰
```

---

### ğŸ³ 4. Dockerfileï¼ˆä»¥é™æ€å‰ç«¯ä¸ºä¾‹ï¼‰
```dockerfile
FROM nginx:alpine
COPY dist /usr/share/nginx/html
```
```yaml
# docker-compose.yml
version: "3.9"
services:
  web:
    build: .
    ports:
      - "127.0.0.1:3000:80"
    restart: unless-stopped
```

---

### ğŸ” 5. ä¸€é”®æ›´æ–°è„šæœ¬ï¼ˆæœ¬åœ°ä¹Ÿå¯æ‰‹åŠ¨è·‘ï¼‰
```bash
#!/bin/bash
# /home/muliminty/app/update.sh
set -e
cd /home/muliminty/app
git pull origin main
docker compose build --no-cache
docker compose up -d --remove-orphans
echo "âœ… æ›´æ–°å®Œæˆï¼Œå®¹å™¨å·²é‡å¯"
```
èµ‹æƒï¼š  
```bash
chmod +x /home/muliminty/app/update.sh
```

---

### ğŸª 6. Git æœåŠ¡å™¨ Hookï¼ˆè‡ªåŠ¨è§¦å‘ï¼‰
```bash
# /home/muliminty/app/.git/hooks/post-receive
#!/bin/bash
exec >>/tmp/deploy.log 2>&1
echo "$(date) æ”¶åˆ° pushï¼Œå¼€å§‹éƒ¨ç½²..."
cd /home/muliminty/app || exit 1
./update.sh
```
èµ‹æƒï¼š  
```bash
chmod +x /home/muliminty/app/.git/hooks/post-receive
```

---

### ğŸŒ 7. Nginx åå‘ä»£ç†ï¼ˆé›¶ä¸­æ–­ï¼‰
```nginx
# /etc/nginx/sites-available/app
server {
    listen 80;
    server_name  your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```
å¯ç”¨ï¼š
```bash
sudo ln -s /etc/nginx/sites-available/app /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx
```

---

### ğŸš€ 8. ä½¿ç”¨æµç¨‹ï¼ˆæ—¥å¸¸å¼€å‘ï¼‰
1. æœ¬åœ°å†™ä»£ç  â†’ `git commit -m "xxx"`  
2. `git push origin main`  
3. æœåŠ¡å™¨ Hook è‡ªåŠ¨æ‰§è¡Œ `./update.sh`  
4. Docker é‡æ–°æ„å»º â†’ å¹³æ»‘é‡å¯ â†’ Nginx æ— ä¸­æ–­  
5. æµè§ˆå™¨åˆ·æ–°å³å¯çœ‹åˆ°æœ€æ–°æ•ˆæœ